
extends ../layout.jade

//- Positionate

//- TODO: add different kind of anchors and positionables, and select those to use using a radio, just to test different configurations (o magari crearne 2 e switchare tra i 2, uno diventa l'anchor e l'altro il positionable)

append main
  +divider-block Anchor

  +square-sample(style="z-index: 100;").anchor.draggable
  +square-sample(style="position:fixed; top:0; left: 0; z-index: 101;").positionable.secondary

  +divider-block Positionate

  +multiple
    +checkbox({ name: "live", title: "Live", value: 1 }).live.outlined
    +button("positionate2anchor ( false )").outlined Auto
    +button("positionate2anchor ( 'top' )").outlined Top
    +button("positionate2anchor ( 'bottom' )").outlined Bottom
    +button("positionate2anchor ( 'left' )").outlined Left
    +button("positionate2anchor ( 'right' )").outlined Right
    +button("positionate2axis ( 'x' )").outlined X Axis
    +button("positionate2axis ( 'y' )").outlined Y Axis
    +button("positionate2diraxis ( 'x', 'top' )").outlined X Top
    +button("positionate2diraxis ( 'y', 'left' )").outlined Y Left
    +multiple.joined
      +input({ name: "input_x", label: "X axis..." }).no-floating.white.outlined
      +input({ name: "input_y", label: "Y axis..." }).no-floating.white.outlined
      +button("positionate2coordinates ()").secondary.outlined Coordinates

  +divider-block Actions

  +multiple.actions
    +button("xxxsmall_positionable ()").outlined XXX-Small positionable
    +button("medium_positionable ()").outlined Medium positionable
    +button("xxxlarge_positionable ()").outlined XXX-Large positionable

append body-end
  +noty({ body: "The anchor is draggable" })
  +script.
    var liveUpdate = false,
        liveTriggered = false;

    function positionate2anchor ( direction ) {
      $('.positionable').positionate ({ $anchor: $('.anchor'), direction: direction });
    }
    function positionate2axis ( axis ) {
      $('.positionable').positionate ({ $anchor: $('.anchor'), axis: axis });
    }
    function positionate2diraxis ( axis, direction ) {
      $('.positionable').positionate ({ $anchor: $('.anchor'), axis: axis, direction: direction });
    }
    function positionate2coordinates () {
      $('.positionable').positionate ({ point: { x: Number($('input[name="input_x"]').val ()), y: Number($('input[name="input_y"]').val ()) } });
    }
    function positionateLive () {
      if ( liveUpdate ) {
        $('.positionable').positionate ({ $anchor: $('.anchor') });
      }
    }
    function xxxsmall_positionable () {
      $('.positionable').removeClass ( 'xxxlarge' ).addClass ( 'xxxsmall' );
    }
    function medium_positionable () {
      $('.positionable').removeClass ( 'xxxsmall xxxlarge' );
    }
    function xxxlarge_positionable () {
      $('.positionable').removeClass ( 'xxxsmall' ).addClass ( 'xxxlarge' );
    }

    $('.live').on ({
      'checkbox:check': function () {
        liveUpdate = true;
        positionateLive ();
        if ( !liveTriggered ) {
          liveTriggered = true;
          $('.anchor').on ( Pointer.dragmove, positionateLive );
        }
      },
      'checkbox:uncheck': function () {
        liveUpdate = false;
      }
    })

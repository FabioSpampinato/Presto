//- select.jade

//- FIXME: Add support for arbitrary number of optgroups levels

mixin select-btn(options, selected, id, icon)
    .button.actionable.select-btn.select-trigger(data-select="select-"+id, class=(!block ? "compact" : ""))&attributes(attributes)
        block
        +icon(icon || "navigation-unfold-more")(class=(block ? "right" : ""))
        +select(options, selected, id)

mixin select(options, selected, id)
    select(id="select-"+id, name=id, placeholder="Select a value...")
        each val, prop in options
            if typeof val === "object"
                optgroup(label=prop)
                    each subval, subprop in val
                        option(value=subprop, selected=(subprop === selected))= subval
            else
                option(value=prop, selected=(subprop === selected))= val


/* =========================================================================
 * Svelto - Carousel
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @require ../icon/icon.scss
 * @require ../widget/widget.scss
 * ========================================================================= */

//TODO: When inset add proper dark shadow at the left and the right
//TODO: Add better support for img tags, .image-wrp, container and card
//TODO: Modularize it

/* CAROUSEL */

.carousel {

  @extend .widget;
  display: flex;
  align-items: stretch;
  position: relative;
  height: $carousel-height;

  /* INDICATORS */

  &-indicators {
    z-index: $carousel-indicators-z-index;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    justify-self: center;
    padding: $gutter;
  }

  /* INDICATOR */

  &-indicator {

    width: $carousel-indicator-size;
    height: $carousel-indicator-size;
    border: $carousel-indicator-border-width solid $carousel-indicator-color;
    border-radius: 50%;
    background-color: transparent;
    cursor: pointer;
    opacity: $carousel-indicator-opacity;
    transition-property: background-color, opacity;
    transition-duration: $carousel-indicator-animation-duration;

    /* HOVER */

    &:hover {
      opacity: $carousel-indicator-hover-opacity !important;
    }

    /* NOT FIRST */

    &:not(:first-child) {
      margin-left: $gutter-half / 2;
    }

    /* NOT LAST */

    &:not(:last-child) {
      margin-right: $gutter-half / 2;
    }

    /* CURRENT */

    &.current {
      background-color: $carousel-indicator-color;
    }

  }

  /* ITEMS */

  &-items {

    position: relative;
    overflow: hidden;
    flex-grow: 1;
    flex-shrink: 1; // IE-10-11 default it to 0 instead
    background-color: $carousel-items-bg-color;

    /* ITEM */

    > * {
      @include fill-absolute ();
      margin-bottom: 0 !important;
      border-radius: inherit;
    }

  }

  /* SLIDE HORIZONTAL */

  &.slide,
  &.slide-horizontal,
  &:not(.slide-vertical):not(.fade) {

    /* ITEMS */

    .carousel-items {

      /* ITEM */

      > * {
        transition: transform $carousel-slide-animation-transform-duration;
        transform: translateX(-100%);
      }

      /* PREV */

      > .previous {
        z-index: 2;
      }

      /* CURRENT */

      > .current {

        z-index: 3;
        transform: translateX(0);

        /* FOLLOWING */

        ~ * {
          transform: translateX(100%);
        }

      }

    }

  }

  /* SLIDE VERTICAL */

  &.slide-vertical {

    /* ITEMS */

    .carousel-items {

      /* ITEM */

      > * {
        transition: transform $carousel-slide-animation-transform-duration;
        transform: translateY(-100%);
      }

      /* PREV */

      > .previous {
        z-index: 2;
      }

      /* CURRENT */

      > .current {

        z-index: 3;
        transform: translateY(0);

        /* FOLLOWING */

        ~ * {
          transform: translateY(100%);
        }

      }

    }

  }

  /* FADE */

  &.fade {

    /* ITEMS */

    .carousel-items {

      /* ITEM */

      > * {
        opacity: 0;
        transition: opacity $carousel-fade-animation-opacity-duration;
      }

      /* PREV */

      > .previous {
        z-index: 2;
        opacity: 0;
      }

      /* CURRENT */

      > .current {
        z-index: 3;
        opacity: 1;
      }

    }

  }

  /* HOVER */

  &:hover {

    /* INDICATORS */

    .carousel-indicators {

      /* INDICATOR */

      .carousel-indicator {
        opacity: $carousel-hover-indicator-opacity;
      }

    }

  }

  /* OUTSET */

  &:not(.inset) {

    /* PREV / NEXT */

    .carousel-previous,
    .carousel-next {
      align-self: center;
      margin-bottom: 0;
    }

    /* PREV */

    .carousel-previous {
      order: 1;
      margin-left: $gutter;
      margin-right: $gutter;
    }

    /* NEXT */

    .carousel-next {
      order: 3;
      margin-left: $gutter;
      margin-right: $gutter;
    }

    /* ITEMS */

    .carousel-items {
      order: 2;
    }

  }

  /* INSET */

  &.inset {

    /* PREV / NEXT */

    .carousel-previous,
    .carousel-next {

      position: absolute;
      z-index: $carousel-inset-previous-next-z-index;
      display: flex;
      align-items: center;
      top: 0;
      bottom: 0;
      font-size: $carousel-inset-previous-next-font-size;

      /* ENABLED */

      &:not(.disabled) {
        cursor: pointer;
      }

      /* AFTER (ICON) */

      &:after {
        @extend %icon;
        margin-bottom: 0;
        color: $carousel-inset-previous-next-color;
        opacity: $carousel-inset-previous-next-opacity;
        transition: opacity $carousel-inset-previous-next-animation-opacity-duration;
      }

    }

    /* PREV */

    .carousel-previous {

      justify-content: flex-start;
      left: 0;
      padding-left: $gutter;
      width: $carousel-inset-previous-width;

      /* AFTER (ICON) */

      &:after {
        content: 'chevron_left';
      }

    }

    /* NEXT */

    .carousel-next {

      justify-content: flex-end;
      right: 0;
      padding-right: $gutter;
      width: $carousel-inset-next-width;

      /* AFTER (ICON) */

      &:after {
        content: 'chevron_right';
      }

    }

    /* HOVER */

    &:hover {

      /* PREV / NEXT */

      .carousel-previous,
      .carousel-next {

        /* AFTER (ICON) */

        &:after {
          opacity: $carousel-inset-hover-previous-next-opacity;
        }

        /* HOVER */

        &:not(.disabled):hover {

          /* AFTER (ICON) */

          &:after {
            opacity: $carousel-inset-previous-next-hover-opacity;
          }

        }

      }

    }

  }

}


/* =========================================================================
 * Svelto - Image
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @require ../reset/reset.scss
 * @require ../widget/widget.scss
 * @require ../container/container.scss
 * ========================================================================= */

//TODO: Add `figure` support

/* DEFAULT */

img {
  @extend .widget;
  $colors: map-get($colors, $image-color);
  $border: nth($colors, 4);
  display: flex;
  border-color: $border;
  width: 100%;
  height: auto;
  min-height: 1px; // It fixes a bug in IE11 where the images are stretched vertically
}

p > img,
span > img {
  display: inline-flex;
  vertical-align: middle;
  max-width: 100%;
  width: auto;
  margin-bottom: 0 !important;
}

/* IMAGE */

.image-wrp {

  @extend .widget;
  @include color ( $image-color );
  display: flex;
  flex-direction: column;
  min-height: 1px; // It fixes a bug in IE11 where the images are stretched vertically

  /* LINK */

  > a {
    margin-bottom: 0 !important;
  }

  /* IMAGE */

  img {
    order: 2;
    border-radius: inherit;
    margin-bottom: 0 !important;
  }

  /* CAPTION */

  .image-caption {

    @extend .container;
    @include color ( $image-caption-color );
    border-radius: 0;
    margin-bottom: 0;
    overflow: auto;

    &:not(.attached) {

      position: absolute;
      z-index: $image-caption-z-index;
      left: 0;
      right: 0;

      &.on-hover {
        opacity: 0;
        transition: opacity $image-caption-transition-opacity-duration;
      }

      &:not(.top) {
        bottom: 0;
      }

      &.top {
        top: 0;
      }

    }

    &.attached {

      &:not(.top) {
        order: 3;
      }

      &.top {
        order: 1;
      }

    }

    &:not(.top) {
      @include border-bottom-radius ( inherit );
    }

    &.top {
      @include border-top-radius ( inherit );
    }

  }

  &:hover .image-caption:not(.attached).on-hover {
    opacity: 1;
  }

  &.disabled .image-caption:not(.attached).on-hover,
  .disabled & .image-caption:not(.attached).on-hover {
    display: none;
  }

}

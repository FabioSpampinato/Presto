
/* =========================================================================
 * Svelto - Modal
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * ========================================================================= */

/* MODAL */

//FIXME: How does an overlay inside a modal work? Maybe it's buggy
//FIXME: Not centered on Dolphin Browser, probably translateX doesn't work, strange

//FIXME: Not working on iPod's Safari

// In theory pretty much everything can be a modal but it works as expected with `card` and `card`-like markups

.modal {

  @include z-depth ( $modal-z-depth );
  transform: translate(-50%, -50%) scale(1);
  top: 50%;
  left: 50%;
  display: none;
  position: fixed;
  z-index: $modal-z-index;
  transition-property: transform, opacity;
  transition-duration: $modal-animation-duration;
  margin: 0;
  cursor: pointer;
  overflow: visible !important; // Since we need the pseudo element to be showed

  /* CHILDREN */

  > * {
    cursor: auto;
  }

  /* BEFORE (BACKGROUND) */

  &:before {
    content: '';
    position: absolute;
    width: 400vw;
    height: 400vh;
    top: -200vh;
    left: -200vw;
    z-index: -1;
    background-color: $modal-background-color;
  }

  /* NOT FULLSCREEN */

  &:not(.fullscreen) {
    max-width: $modal-max-width;
    max-height: $modal-max-height; //FIXME: On iOS a value of 100vh will exceed the actual visible viewport, maybe instead of using vw and vh center using fill-absolute and margin: auto, but apply some positive values to the top, right, bottom and left properties, it should work, maybe...
  }

  /* FULLSCREEN */

  &.fullscreen {
    border-width: 0;
    border-radius: 0;
    width: 100vw;
    height: 100vh;
  }

  /* SHOW / OPEN */

  &.show,
  &.open {
    display: flex !important;
  }

  /* CLOSED */

  &:not(.open) {
    opacity: 0;
    transform: translate(-50%, -50%) scale($modal-closed-scale);
  }

}

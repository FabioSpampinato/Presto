
/* =========================================================================
 * Svelto - Card
 * =========================================================================
 * Copyright (c) 2015 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires ../container/container.scss
 * ========================================================================= */

/* CARD */

//FIXME: There's an overflow bug when scrolling the block-content, it goes a bit over the footer, but not if we zoom the page
//FIXME: It's not good on Dolphin browser

.card {

  @extend .widget;
  @include color ( $card-color );
  display: flex;
  flex-direction: column;
  border-radius: $card-border-radius;

  /* SECTIONS */

  &-header,
  &-block,
  &-footer {

    &:not(.multiple) {
      @extend .container;
      border-radius: 0;
    }

    &.multiple {

      margin-bottom: 0 !important;

      > * {
        border-radius: 0;
        margin-bottom: 0 !important;
      }

    }

    .card.compact & {
      @extend .container.compact;
    }

  }

  /* HEADER / FOOTER */

  &-header,
  &-footer {
    flex-shrink: 0; //INFO: So that when there's an overflow just `.card-block` scrolls
  }

  /* FOOTER */

  div.card-footer.multiple[class*="multiple"] { //FIXME: Ugly fix
    margin-bottom: 0 !important;
  }

  /* BLOCK */

  &-block {
    flex-grow: 1; //INFO: Takes the remaining space, if any
    flex-shrink: 1; //INFO: IE-10-11 default it to 0 instead
    overflow: auto;
  }

  /* NO MARGIN BOTTOM FOR CHILDREN (WIDGETS) */

  > :not(.overlay):not(.ripple-circle) {
    margin-bottom: 0 !important; //FIXME: The `!important` shouldn't be necessary
  }

  /* BORDER RADIUS INHERITANCE */

  > :first-child:not(.overlay):not(.ripple-circle),
  > :first-child.overlay + *,
  > :first-child.ripple-circle + * {
    @include border-top-radius ( inherit );
  }

  > .multiple:first-child {

    > :first-child {
      border-top-left-radius: inherit;
    }

    > :last-child {
      border-top-right-radius: inherit;
    }

  }

  > :last-child {
    @include border-bottom-radius ( inherit );
  }

  > .multiple:last-child {

    > :first-child {
      border-bottom-left-radius: inherit;
    }

    > :last-child {
      border-bottom-right-radius: inherit;
    }

  }

  /* OUTLINED */

  &.outlined {

    /* INSET OUTLINED */

    > .outlined {

      margin-left: - $outline-width;
      margin-right: - $outline-width;

      /* FIRST / LAST */

      &:first-child:not(.overlay):not(.ripple-circle) {
        margin-top: - $outline-width;
      }

      &:last-child {
        margin-bottom: - $outline-width !important; //FIXME: The `!important` shouldn't be necessary
      }

    }

    /* INSET OUTLINED */

    > :first-child.overlay + .outlined,
    > :first-child.ripple-circle + .outlined {
      margin-top: - $outline-width;
    }

    /* INSET IMAGE */ //FIXME: Ugly fix for better supporting inset outlined unwrapped images

    > img.outlined {
      width: calc(100% + #{$outline-width * 2}) !important;
    }

  }

  /* NEXT CHILDREN OUTLINED */

  > .outlined + .outlined:not(img) {
    border-top-width: 0;
  }

}


/* =========================================================================
 * Svelto - Widgets - Slider
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @require core/widget/widget.scss
 * @require decorators/colors/colors.scss
 * @require decorators/z_depths/z_depths.scss
 * @require widgets/icon/icon.scss
 * ========================================================================= */

/* SLIDER */

//TODO: Maybe use a tooltip with the number inside instead of the handler we are using right now

.slider {

  @extend %widget;
  @include color ( $slider-color, $slider-color-force, $slider-color-basic );
  display: flex;
  align-items: stretch;
  min-height: $slider-min-height;
  border-radius: $container-border-radius;

  /* INPUT */

  input {
    display: none;
  }

  /* OUTLINED */

  &.outlined {

    .slider-min {
      padding-left: $gutter;
    }

    .slider-max {
      padding-right: $gutter;
    }

  }

  /* MIN / MAX */

  &-min,
  &-max {
    display: flex;
    justify-content: center;
    align-items: center;
    min-width: $slider-min-max-min-width;
  }

  /* MIN */

  &-min {

    margin-right: $slider-handler-width / 2;

    &:after {
      content: attr(data-min);
    }

  }

  /* MAX */

  &-max {

    margin-left: $slider-handler-width / 2;

    &:after {
      content: attr(data-max);
    }

  }

  /* BAR */

  &-bar {
    display: flex;
    align-items: center;
    position: relative;
    flex: 1 1 auto; // IE-10/11 sets flex-shrink to 0
  }

  /* UNHIGHLIGHT */

  &-unhighlight {
    @include color ( $slider-unhighlight-color, $slider-unhighlight-color-force, $slider-unhighlight-color-basic );
    position: relative;
    overflow: hidden;
    height: $slider-unhighlight-height;
    border-radius: $slider-unhighlight-border-radius;
    width: 100%;
    transform: translateZ(0); // Otherwise the border radius is not always respected
  }

  /* HIGHLIGHT */

  &-highlight {
    @include color ( $slider-highlight-color, $slider-highlight-color-force, $slider-highlight-color-basic );
    @include fill ();
    position: absolute;
    right: 100%;
    transition: background-color $slider-animation-duration;
  }

  /* HANDLER WRAPPER */

  &-handler-wrp {
    @include center-absolute ( false, $slider-handler-height );
    left: 0;
    margin-left: - $slider-handler-width / 2;
  }

  /* HANDLER */

  &-handler {

    @include color ( $slider-handler-color, $slider-handler-color-force, $slider-handler-color-basic );
    @include z-depth ( $slider-handler-z-depth, $slider-handler-z-depth-force, $slider-handler-z-depth-basic );
    z-index: 1;
    width: $slider-handler-width;
    height: $slider-handler-height;
    transition-property: transform, background-color;
    transition-duration: $slider-animation-duration;
    border-radius: $slider-handler-border-radius;
    text-align: center;

    &:before {
      @include fill-absolute ();
      z-index: -1;
      content: '';
      transition-property: opacity, transform;
      transform: scale($switch-handler-before-scale-inactive);
      transition-duration: $slider-animation-duration;
      opacity: 0;
      border-radius: $slider-handler-border-radius;
      background-color: inherit;
    }

  }

  //FIXME: It's not perfectly centered on Nexus 4 using Chrome

  &-label {
    display: inline-block;
    vertical-align: middle;
    font-size: $slider-handler-label-font-size;
    transition-property: opacity, transform;
    transition-duration: $slider-animation-duration;
    transform: scale(0);
    opacity: 0;
  }

  /* ENABLED */

  &:not(.disabled) {

    /* MIN / MAX */

    .slider-min,
    .slider-max {

      cursor: pointer;

      &:hover:after {
        @extend %icon-basic;
        margin-bottom: 0;
      }

    }

    /* MIN */

    .slider-min:hover:after {
      content: $slider-min-icon;
    }

    .slider-min[data-icon]:hover:after {
      content: attr(data-icon);
    }

    /* MAX */

    .slider-max:hover:after {
      content: $slider-max-icon;
    }

    .slider-max[data-icon]:hover:after {
      content: attr(data-icon);
    }

    /* BAR */

    .slider-bar {

      cursor: pointer;

      &:active,
      .slider-handler-wrp.draggable-dragging {

        .slider-handler {

          transform: scale($slider-handler-active-transform-scale);

          &:before {
            transform: scale($switch-handler-before-scale-active);
            opacity: $switch-handler-before-active-opacity;
          }

        }

      }

    }

    /* HANDLER */

    .slider-handler {
      cursor: move;
    }

  }

  /* HOVER / ACTIVE */

  &:hover,
  &:active,
  .slider-handler-wrp.draggable-dragging {

    /* LABEL */

    .slider-label {
      transform: scale(1);
      opacity: 1;
    }

  }

}

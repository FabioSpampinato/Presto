
/* =========================================================================
 * Svelto - Progressbar v0.2.0
 * =========================================================================
 * Copyright (c) 2015 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires _settings.scss
 * @requires ../widget/_widget.scss
 * ========================================================================= */

//TODO: Add support for vertical progressbar (not particularly useful, but when attached it will be an appropriate example of horizontally attached widget)
//TODO: Add an infinite linear loading progressbar, like before downloading something from the play store

/* PROGRESSBAR */

.progressbar {

  @extend .widget;
  @include color ( $progressbar-color );
  display: flex;
  overflow: hidden;
  height: $progressbar-height;
  border-radius: $progressbar-border-radius;
  transform: translateZ(0); //INFO: Fixes an overflowing bug, it happens only on helpers -> attached as far as I could see

  /* HIGHLIGHT */

  &-highlight {
    @include color ( $progressbar-highlight-color );
    @include text-truncate ();
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: min-width $progressbar-transition-all-duration;
  }

  /* LABELED */

  &.labeled {

    /* AFTER (LABEL) */

    .progressbar-highlight:after {
      content: attr(data-value);
      font-size: $progressbar-label-font-size;
      padding: 0 $gutter-half;
    }

  }

  /* STRIPED */

  &.striped {

    .progressbar-highlight {
      transform: translateZ(0);
    }

    .progressbar-highlight:before {
      @include fill-absolute ();
      background: linear-gradient(-45deg, $progressbar-stripe-light-color 25%, $progressbar-stripe-dark-color 25%, $progressbar-stripe-dark-color 50%, $progressbar-stripe-light-color 50%, $progressbar-stripe-light-color 75%, $progressbar-stripe-dark-color 75%, $progressbar-stripe-dark-color);
      content: '';
      pointer-events: none;
      background-size: $progressbar-stripe-size $progressbar-stripe-size;
    }

    &:not(.disabled) .progressbar-highlight:before {
      animation: progressbar-stripes-move $progressbar-stripes-transition-move-duration linear 0s infinite;
    }

  }

  /* COMPACT */

  &.compact {

    height: $progressbar-compact-height;

    /* AFTER (LABEL) */

    .progressbar-highlight:after {
      font-size: $progressbar-compact-label-font-size;
    }

  }

  /* SLIM */

  &.slim {

    height: $progressbar-slim-height;

    /* AFTER (LABEL) */

    .progressbar-highlight:after {
      font-size: $progressbar-slim-label-font-size;
    }

  }

}

/* KEYFRAMES */

@keyframes progressbar-stripes-move {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: $progressbar-stripe-size $progressbar-stripe-size;
  }
}

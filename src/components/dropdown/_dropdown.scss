
/* =========================================================================
 * Svelto - Dropdown v0.3.0
 * =========================================================================
 * Copyright (c) 2015 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires _settings.scss
 * ========================================================================= */

//FIXME: If the content is too long it excedes the visible area
//FIXME: The container should be scrollable if the content exceedes it
//FIXME: Fix the scrollbars when setting .no-padding to a dropdown containing a vertical fluid joined multiple (liek our `base` praticamente)
//FIXME: A diveder inside looks crappy, it should have a full width
//TODO: Add possibility to change the color of the tips
//TODO: Add tip shadow

/* DROPDOWN */

.dropdown {

  @include z-depth ( $dropdown-z-depth );
  z-index: $dropdown-z-index;
  position: fixed;
  top: 0;
  left: 0;
  max-width: $dropdown-max-width;
  margin: $dropdown-margin;
  transition: opacity $dropdown-transition-all-duration;

  /* NOT CONTAINER */

  &:not(.container) {
    max-height: $dropdown-max-height;
  }

  /* MOVING */

  &.moving {

    transition: transform $dropdown-transition-all-duration;

    /* TIP */

    &:before {
      transition: transform $dropdown-transition-all-duration;
    }

  }

  /* NO TIP / ATTACHED */

  &.no-tip,
  &.attached {

    /* TIP */

    &:before {
      display: none !important;
    }

  }

  /* ATTACHED */

  &.attached {

    padding: 0;

    /* TOP */

    &.positionate-top {
      margin-bottom: - $outline-width;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }

    /* BOTTOM */

    &.positionate-bottom {
      margin-top: - $outline-width;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }

    /* LEFT */

    &.positionate-left {
      margin-right: - $outline-width;
    }

    /* RIGHT */

    &.positionate-right {
      margin-left: - $outline-width;
    }

  }

  /* TIP */

  &:before {
    @include square ( $dropdown-tip-size, inherit );
    transform: rotate(45deg);
    position: absolute;
    content: '';
    z-index: 1;
  }

  /* TIP (OUTLINED) */

  &.outlined:before {
    border-width: $outline-width;
    border-style: solid;
    border-color: inherit;
  }

  /* TIP (POSITION-RELATED) */

  &.positionate-top {

    &:before {
      left: - ( $dropdown-tip-size / 2 );
      bottom: - ( $dropdown-tip-size / 2 );
      clip-path: polygon(0 100%, 100% 100%, 100% 0);
    }

    /* OUTLINED */

    &.outlined {

      &:before {
        margin-bottom: - $outline-width;
      }

    }

  }

  &.positionate-bottom {

    &:before {
      top: - ( $dropdown-tip-size / 2 );
      left: - ( $dropdown-tip-size / 2 );
      clip-path: polygon(100% 0, 0 0, 0 100%);
    }

    /* OUTLINED */

    &.outlined {

      &:before {
        margin-top: $outline-width;
      }

    }

  }

  &.positionate-left {

    &:before {
      top: - ( $dropdown-tip-size / 2 );
      right: - ( $dropdown-tip-size / 2 );
      clip-path: polygon(0 0, 100% 100%, 100% 0);
    }

    /* OUTLINED */

    &.outlined {

      &:before {
        margin-right: $outline-width;
      }

    }

  }

  &.positionate-right {

    &:before {
      top: - ( $dropdown-tip-size / 2 );
      left: - ( $dropdown-tip-size / 2 );
      clip-path: polygon(0 0, 100% 100%, 0 100%);
    }

  }

  /* CLOSED */

  &:not(.open) {
    pointer-events: none;
    opacity: 0;
  }

}

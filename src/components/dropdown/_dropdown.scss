
/* =========================================================================
 * Svelto - Dropdown v0.2.0
 * =========================================================================
 * Copyright (c) 2015 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires _settings.scss
 * ========================================================================= */

//FIXME: If the content is too long it excedes the visible area
//FIXME: The container should be scrollable if the content exceedes it
//TODO: Add possibility to change the color of the tips
//FIXME: Fix the scrollbars when setting .no-padding to a dropdown containing a vertical fluid joined multiple (liek our `base` praticamente)
//FIXME A diveder inside looks crappy, it should have a full width

/* DROPDOWN */

.dropdown {

  position: fixed;
  top: 0;
  left: 0;
  z-index: $dropdown-z-index;
  padding: $dropdown-padding;
  transition: opacity $dropdown-transition-all-duration;

  /* MOVING */

  &.moving {

    transition: transform $dropdown-transition-all-duration;

    /* TIP */

    .dropdown-tip {
      transition: transform $dropdown-transition-all-duration;
    }

  }

  /* NO TIP / ATTACHED */

  &.no-tip,
  &.attached {

    /* TIP */

    .dropdown-tip {
      display: none !important;
    }

  }

  /* ATTACHED */

  &.attached {

    padding: 0;

    /* TOP */

    &.positionate-top {

      margin-bottom: - $outline-width;

      & > .container {
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
      }

    }

    /* BOTTOM */

    &.positionate-bottom {

      margin-top: - $outline-width;

      & > .container {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }

    }

    /* LEFT */

    &.positionate-left {
      margin-right: - $outline-width;
    }

    /* RIGHT */

    &.positionate-right {
      margin-left: - $outline-width;
    }

  }

  /* TOP */

  &-tip {

    position: absolute;
    z-index: 1;
    display: none;
    width: 0;
    height: 0;
    transform: translateZ(0);

    /* BEFORE / AFTER */

    &:before,
    &:after {
      display: block;
      content: '';
    }

    /* BEFORE */

    &:before {
      @include triangle ( $dropdown-tip-bg-size, $dropdown-tip-bg-color, up );
      margin-left: - ( $dropdown-tip-bg-size / 2 );
    }

    /* AFTER */

    &:after {
      @include triangle ( $dropdown-tip-fg-size, $dropdown-tip-fg-color, up );
      margin-top: - ( $dropdown-tip-fg-size / 2 );
      margin-left: - ( $dropdown-tip-fg-size / 2 );
    }

    /* TOP / BOTTOM */

    &.top,
    &.bottom {
    }

    /* TOP */

    &.top {
      top: $dropdown-padding - ( $dropdown-tip-bg-size / 2 ) + $dropdown-border-width;
    }

    /* BOTTOM */

    &.bottom {
      bottom: $dropdown-padding - ( $dropdown-tip-bg-size / 2 ) + $dropdown-border-width;
      transform: rotate(180deg);
    }

    /* LEFT / RIGHT  */

    &.left,
    &.right {
      margin-top: - ( $dropdown-tip-bg-size / 4 );
    }

    /* LEFT */

    &.left {
      left: $dropdown-padding - ( $dropdown-tip-bg-size / 2 ) + $dropdown-border-width;
      transform: rotate(-90deg);
    }

    /* RIGHT */

    &.right {
      right: $dropdown-padding - ( $dropdown-tip-bg-size / 2 ) + $dropdown-border-width;
      transform: rotate(90deg);
    }

  }

  /* TIP TO SHOW */

  &.positionate-top .dropdown-tip.bottom,
  &.positionate-bottom .dropdown-tip.top,
  &.positionate-left .dropdown-tip.right,
  &.positionate-right .dropdown-tip.left {
    display: block;
  }

  > .container {
    @include z-depth ( $dropdown-z-depth );
    max-width: $dropdown-container-max-width;
    max-height: $dropdown-container-max-height;
    margin-bottom: 0;
    border-width: $dropdown-border-width;
  }

  /* CLOSED */

  &:not(.open) {
    pointer-events: none;
    opacity: 0;
  }

}

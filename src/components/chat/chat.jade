
//- =========================================================================
//- Svelto - Chat v0.1.0
//- =========================================================================
//- Copyright (c) 2015 Fabio Spampinato
//- Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
//- =========================================================================

//- Options
  {
    sender: {
      img: '' // Avatar url
      name: '', //  Nickname
      url: '', // Profile url
    },
    permissions: {
      own: boolean, // Flag that decide if the chat is owned by you
      reply: boolean, // Flat that decide if you can reply it
      edit: boolean, // Flag that decide if you can edit it
      delete: boolean, // Flag that decide if you can delete it
    },
    message: {
      timestamp: number, // Unix timestamp of when the message as been sent
      content: '', // The message content
      group: '', // The ID of the group, useful for joining all the messages
      level: ''
    }
  }

mixin chat-msg(options)
  - options.message.level = options.message.level || 1;
  - options.sender = options.sender || {};
  - options.sender.name = options.sender.name || "Unknown";
  .chat-msg(class=("level-" + options.message.level + " sender-" + options.sender.name))&attributes(attributes)
    if options.sender.img
      if options.sender.url
        a(href=options.sender.url title=options.sender.name).chat-msg-img
          img(src=options.sender.img title=options.sender.name)
      else
        .chat-msg-img
          img(src=options.sender.img title=options.sender.name)
      .chat-msg-indicator
    .chat-msg-content
      +container.outlined
        +container-header.inherit.outlined
          if options.sender.name !== "Unknown"
            +multiple-left
              if options.sender.url
                a(href=options.sender.url title=options.sender.name)= options.sender.name
              else
                = options.sender.name
          +multiple-right
            +button-icon("access_time")(data-timestamp-title=options.message.timestamp).small.outlined.compact
            if options.permissions
              if options.permissions.own
                +button-icon("account_circle")(title="You are the owner").small.outlined.compact
              if options.permissions.reply
                +button-icon("reply")(title="Reply").small.outlined.compact
              if options.permissions.edit
                +button-icon("mode_edit")(title="Edit").small.outlined.compact
              if options.permissions.delete
                +button-icon("delete")(title="Delete").small.outlined.compact
        +container-content= options.message.content

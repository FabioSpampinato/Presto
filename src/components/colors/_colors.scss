
/* =========================================================================
 * Svelto - Colors v0.3.0
 * =========================================================================
 * Copyright (c) 2015 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires _settings.scss
 * ========================================================================= */

//TODO: Maybe add the `transparent-initial` class, that output an inherited background color, when not hovering or pressing
//FIXME: .actionable should do it's work only it it's not child of .disabled or -disabled

/* MIXIN */

@mixin color ( $color_name, $basic: false, $gradient: false, $extra: '' ) {

  $colors: map-get($colors, $color_name);

  $bg: nth($colors, 1);
  $bg-hover: nth($colors, 2);
  $bg-active: nth($colors, 3);
  $border: nth($colors, 4);
  $accent: nth($colors, 5);
  $text: nth($colors, 6);
  $link: nth($colors, 7);
  $link-hover: nth($colors, 8);
  $support-gradient: nth($colors, 9);

  border-color: $border #{$extra};
  color: $text #{$extra};

  @if $color_name != inherit {

    &.transparentize {
      border-color: transparentize($border, $color-transparentize-amount) #{$extra};
    }

  }

  @if $basic == false {

    background: $bg #{$extra};

  @if $color_name != inherit {

    &.transparentize {
      background: transparentize($bg, $color-transparentize-amount) #{$extra};
    }

  }

    @if $support-gradient == true {

      &.gradient {
        @include gradient-vertical-from-color ( $color_name, #{$extra} );
      }

    }

    &.actionable,
    &.button,
    &.button-corner {

      &.active {

        background: $bg-active #{$extra};

        @if $color_name != inherit {

          &.transparentize {
              background: transparentize($bg-active, $color-transparentize-amount) #{$extra};
          }

        }

      }

      &:not(.active):not(.dragging):not(.disabled):not([class*='-disabled']) {

        &:hover {

          background: $bg-hover #{$extra};

          @if $color_name != inherit {

            &.transparentize {
              background: transparentize($bg-hover, $color-transparentize-amount) #{$extra};
            }

          }

        }

        &:not(.ripple):active {

          background: $bg-active #{$extra};

          @if $color_name != inherit {

            &.transparentize {
              background: transparentize($bg-active, $color-transparentize-amount) #{$extra};
            }

          }

        }

      }

    }

    &.highlight:after {

      border-color: $accent #{$extra};

      @if $color_name != inherit {

        &.transparentize {
          border-color: transparentize($accent, $color-transparentize-amount) #{$extra};
        }

      }

    }

  } @else {

    @if $gradient == true {

      @if $support-gradient == true {

        @include gradient-vertical-from-color ( $color_name, #{$extra} );

      }

    } @else {

      background: $bg #{$extra};

      @if $color_name != inherit {

        &.transparentize {
          background: transparentize($bg, $color-transparentize-amount) #{$extra};
        }

      }

    }

  }

  @if $color_name != inherit { //INFO: Otherwise it will not work for example under `.container-content` that has color: `inherit`

    p > a { //INFO: We do it just under `p`s, because elsewhere might be an unwanted style

      color: $link #{$extra};

      &:after {
        border-color: $link-hover #{$extra};
      }

      &:hover {
        color: $link-hover #{$extra};
      }

    }

  }

}

@mixin color-text ( $color_name, $extra: '' ) {

  $colors: map-get($colors, $color_name);

  $bg: nth($colors, 1);

  color: $bg #{$extra};

}

@mixin color-link ( $color_name, $extra: '' ) {

  $colors: map-get($colors, $color_name);

  $bg: nth($colors, 1);
  $bg-hover: nth($colors, 2);

  color: $bg #{$extra};

  &:after {
    border-color: $bg-hover #{$extra};
  }

  &:hover {
    color: $bg-hover #{$extra};
  }

}

/* COLORS */

@each $name, $datas in $colors {

  .#{$name} {
    @include color ( $name, false, false, !important );
  }

  .text-#{$name} {
    color: nth($datas, 1);
  }

  .link-#{$name} {
    @include color-link ( $name, !important );
  }

}


/* =========================================================================
 * Svelto - Panel
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @require ../layout/layout.scss
 * ========================================================================= */

//TODO: Add a class that makes the panel stays below the toolbar, in that case the toolbar should have an higher z-index than the panel probably, or maybe pulling it down it's enough (probably not since the background is much larger than the visible part)

//TODO: Not working on Dolphin browser
//FIXME: Not working on iPod's Safari

/* PANEL */

.panel {

  @include z-depth ( $panel-z-depth );
  display: none;
  position: fixed;
  z-index: $panel-z-index;
  margin-bottom: 0;
  border-radius: 0;
  transition: transform $panel-animation-transform-duration;
  overflow: visible !important; // Since we need the pseudo element to be showed

  /* LEFT / RIGHT */

  &.left,
  &.right,
  &:not(.top):not(.bottom) { // Default case
    top: 0;
    bottom: 0;
  }

  /* LEFT */

  &.left,
  &:not(.right):not(.top):not(.bottom) { // Default case
    left: 0;
  }

  /* RIGHT */

  &.right {
    right: 0;
  }

  /* TOP / BOTTOM */

  &.top,
  &.bottom {
    right: 0;
    left: 0;
  }

  /* TOP */

  &.top {
    top: 0;
  }

  /* BOTTOM */

  &.bottom {
    bottom: 0;
  }

  /* SHOW */

  &.show {
    display: flex !important;
  }

  /* OPEN */

  &.open {

    transform: translateX(0) translateY(0) !important;

    /* BEFORE (BACKGROUND) */

    &:before {
      opacity: 1;
    }

  }

  /* PINNED */

  &.pinned {

    @include z-depth ( $panel-pinned-z-depth );

    /* BEFORE (BACKGROUND) */

    &:before {
      display: none;
      opacity: 0;
    }

  }

  /* BEFORE (BACKGROUND) */

  &:before {
    content: '';
    position: absolute;
    opacity: 0;
    width: 400vw;
    height: 400vh;
    top: -200vh;
    left: -200vw;
    z-index: -1;
    cursor: pointer;
    background-color: $panel-background-color;
    transition: opacity $panel-background-animation-opacity-duration;
  }

}

/* LAYOUT */

//FIXME: Maybe use an additional class for enabling the animations we need, or me may conflict with other components

.layout {

  transition: padding $panel-animation-transform-duration;

  > .layout-header.fixed {
    transition-property: top, right, bottom, left;
    transition-duration: $panel-animation-transform-duration;
  }

}

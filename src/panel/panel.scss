
/* =========================================================================
 * Svelto - Panel
 * =========================================================================
 * Copyright (c) 2015-2016 Fabio Spampinato
 * Licensed under MIT (https://github.com/svelto/svelto/blob/master/LICENSE)
 * =========================================================================
 * @requires ../layout/layout.scss
 * ========================================================================= */

//TODO: Add a class that makes the panel stays below the toolbar, in that case the toolbar should have an higher z-index than the panel probably, or maybe pulling it down it's enough (probably not since the background is much larger than the visible part)

//TODO: Not working on Dolphin browser
//FIXME: Not working on iPod's Safari

/* PANEL */

.panel {

  @include z-depth ( $panel-z-depth );
  display: none;
  position: fixed;
  z-index: $panel-z-index;
  margin-bottom: 0;
  border-radius: 0;
  transition: transform $panel-transition-transform-duration;
  overflow: visible !important; // Since we need the pseudo element to be showed

  /* LEFT / RIGHT */

  &.left,
  &.right,
  &:not(.top):not(.bottom) { // Default case

    top: 0;
    bottom: 0;
    width: $panel-vertical-width;

    /* SLIM */

    &.slim {
      width: $panel-slim-vertical-width;
    }

  }

  /* LEFT */

  &.left,
  &:not(.right):not(.top):not(.bottom) { // Default case

    left: 0;
    transform: translateX(- $panel-closed-vertical-spacing);

    /* SLIM */

    &.slim {
      transform: translateX(- $panel-slim-closed-vertical-spacing);
    }

  }

  /* RIGHT */

  &.right {

    right: 0;
    transform: translateX($panel-closed-vertical-spacing);

    /* SLIM */

    &.slim {
      transform: translateX($panel-slim-closed-vertical-spacing);
    }

  }

  /* TOP / BOTTOM */

  &.top,
  &.bottom {

    right: 0;
    left: 0;
    height: $panel-horizontal-height;

    /* SLIM */

    &.slim {
      height: $panel-slim-horizontal-height;
    }

  }

  /* TOP */

  &.top {

    top: 0;
    transform: translateY(- $panel-closed-horizontal-spacing);

    /* SLIM */

    &.slim {
      transform: translateY(- $panel-slim-closed-horizontal-spacing);
    }

  }

  /* BOTTOM */

  &.bottom {

    bottom: 0;
    transform: translateY($panel-closed-horizontal-spacing);

    /* SLIM */

    &.slim {
      transform: translateY($panel-slim-closed-horizontal-spacing);
    }

  }

  /* SHOW */

  &.show {
    display: flex !important;
  }

  /* OPEN */

  &.open {

    transform: translateX(0) translateY(0) !important;

    /* BEFORE (BACKGROUND) */

    &:before {
      opacity: 1;
    }

  }

  /* PINNED */

  &.pinned {

    @include z-depth ( $panel-pinned-z-depth );

    /* BEFORE (BACKGROUND) */

    &:before {
      display: none;
      opacity: 0;
    }

  }

  /* BEFORE (BACKGROUND) */

  &:before {
    content: '';
    position: absolute;
    opacity: 0;
    width: 400vw;
    height: 400vh;
    top: -200vh;
    left: -200vw;
    z-index: -1;
    cursor: pointer;
    background-color: $panel-background-color;
    transition: opacity $panel-background-transition-opacity-duration;
  }

}

/* LAYOUT */

//FIXME: Since we introduced the layout component it needs

.layout {

  &.panel-pinned-left {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-left: $panel-vertical-width;
    }

    > .layout-header.fixed {
      left: $panel-vertical-width;
    }

  }

  &.panel-pinned-right {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-right: $panel-vertical-width;
    }

    > .layout-header.fixed {
      right: $panel-vertical-width;
    }

  }

  &.panel-pinned-top {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-top: $panel-horizontal-height;
    }

    > .layout-header.fixed {
      top: $panel-horizontal-height;
    }

  }

  &.panel-pinned-bottom {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-bottom: $panel-horizontal-height;
    }

    > .layout-header.fixed {
      bottom: $panel-horizontal-height;
    }

  }

  &.panel-slim-pinned-left {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-left: $panel-slim-vertical-width;
    }

    > .layout-header.fixed {
      left: $panel-slim-vertical-width;
    }

  }

  &.panel-slim-pinned-right {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-right: $panel-slim-vertical-width;
    }

    > .layout-header.fixed {
      right: $panel-slim-vertical-width;
    }

  }

  &.panel-slim-pinned-top {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-top: $panel-slim-horizontal-height;
    }

    > .layout-header.fixed {
      top: $panel-slim-horizontal-height;
    }

  }

  &.panel-slim-pinned-bottom {

    > .layout-header:not(.fixed),
    > .layout-content,
    > .layout-footer {
      margin-bottom: $panel-slim-horizontal-height;
    }

    > .layout-header.fixed {
      bottom: $panel-slim-horizontal-height;
    }

  }

  > &-header,
  > &-content,
  > &-footer {
    transition-property: top, right, left;
    transition-duration: $panel-transition-transform-duration;
  }

}
